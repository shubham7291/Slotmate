<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Login</title>
    <link rel="stylesheet" href="css/login_new.css" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://kit.fontawesome.com/a076d05399.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", () => {
    // Check if the JWT token is stored in localStorage
    const jwtToken = localStorage.getItem("token");

    // If the token is found, redirect to the dashboard page
    if (jwtToken) {
        window.location.href = "dashboard.html";  // Replace '/dashboard' with the actual dashboard URL or route
    }
});

    </script>
    <style>
      /* Animation for the popup */
      @keyframes popupAnimation {
          0% {
              transform: scale(0);
              opacity: 0;
          }
          100% {
              transform: scale(1);
              opacity: 1;
          }
      }

      .popup {
          animation: popupAnimation 0.5s ease-out;
      }

      /* Red tick animation */
      @keyframes tickAnimation {
          0% {
              transform: scale(0);
              opacity: 0;
          }
          100% {
              transform: scale(1);
              opacity: 1;
          }
      }

      .tick {
          animation: tickAnimation 0.7s ease-in-out;
      }
  </style>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
    <style>
      /* Rotating Spinner */
      .spinner {
        margin: 0 auto;
        width: 50px;
        height: 50px;
        border: 6px solid rgba(0, 0, 0, 0.1);
        border-left-color: #4caf50; /* Cool green accent */
        border-radius: 50%;
        animation: spin 1s linear infinite;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      #loadingAnimation p {
        font-size: 1rem;
        color: #555;
        margin-top: 10px;
      }
    </style>
  </head>
  <body>
    <!-- Header -->
    <header class="header">
      <div class="logo"><img src="images/mainlogo.jpg" alt="" /></div>
      <nav class="nav">
        <ul class="nav-links">
          <li><a href="#about-us">Login Help</a></li>
          <li><a href="#contact-us">Contact</a></li>
          <li>
            <a href="index.html"><button class="login-signup">Home</button></a>
          </li>
        </ul>
        <button class="hamburger" id="hamburger">
          <i class="fas fa-bars"></i>
        </button>
      </nav>
    </header>

    <section id="login-section">
      <div class="login-container">
        <div class="login-left">
          <h2 id="left-title">Welcome Back!</h2>
          <p id="left-instructions">
            <!-- Dynamic instructions will be inserted here by JavaScript -->
          </p>
          <p id="register-link">
            <!-- Dynamic register/login link will be inserted here -->
          </p>
        </div>

        <hr class="vertical-hr" />

        <div class="login-right">
          <!-- Login Form -->
          <div id="login-form-container">
            <h2>Login</h2>
            <form id="login-form">
              <div class="form-group">
                <label for="username">Username</label>
                <input
                  type="text"
                  id="username"
                  name="username"
                  placeholder="Enter your username"
                  required
                />
              </div>
              <div class="form-group">
                <label for="password">Password</label>
                <div class="password-container">
                  <input
                    type="password"
                    id="password"
                    name="password"
                    placeholder="Enter your password"
                    required
                  />
                  <i
                    class="fas fa-eye"
                    id="toggle-password"
                    onclick="togglePassword()"
                  ></i>
                </div>
              </div>
              <button type="submit" class="login-btn" id="login-btn">Login</button>
              <p><a href="#">Forgot Password?</a></p>
            </form>
          </div>

          <!-- Loading Animation -->
          <div id="loadingAnimation" style="display: none; text-align: center; margin-top: 20px;">
            <div class="spinner"></div>
            <p>Loading, please wait...</p>
          </div>

          <!-- Register Form (hidden initially) -->
          <div id="register-form-container" style="display: none">
            <h2>Register</h2>
            <form id="register-form">
              <div class="form-group">
                <label for="new-username">Phone Number</label>
                <input
                  type="text"
                  id="new-username"
                  name="new-username"
                  placeholder="Enter a phone number..."
                  required
                />
              </div>
              <div class="form-group">
                <label for="new-email">Email</label>
                <input
                  type="email"
                  id="new-email"
                  name="new-email"
                  placeholder="Enter your email"
                  required
                />
              </div>
              <div class="form-group">
                <label for="new-password">Password</label>
                <div class="password-container">
                  <input
                    type="password"
                    id="new-password"
                    name="new-password"
                    placeholder="Create a password"
                    required
                  />
                  <i
                    class="fas fa-eye"
                    id="toggle-register-password"
                    onclick="togglePasswordRegister()"
                  ></i>
                </div>
              </div>
              <div class="form-group">
                <label for="confirm-password">Confirm Password</label>
                <div class="password-container">
                  <input
                    type="password"
                    id="confirm-password"
                    name="confirm-password"
                    placeholder="Re-enter your password"
                    required
                  />
                  <i
                    class="fas fa-eye"
                    id="toggle-confirm-password"
                    onclick="toggleConfirmPassword()"
                  ></i>
                </div>
              </div>

              <button type="submit" class="register-btn" id="register-btn">Register</button>
            </form>
            <p>
              Already have an account?
              <a href="#" onclick="showLogin()">Login here</a>
            </p>
            <p id="signupMessage" class="text-sm mt-2"></p>
          </div>
        </div>
      </div>
    </section>
   <!-- Popup (Hidden by default) -->
<div class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center popup" id="popup" style="display: none;">
  <div class="bg-gray-900 p-8 rounded-md shadow-xl text-center w-96">
      <div class="text-red-500 text-5xl mb-4 tick">
          <i class="fas fa-check-circle"></i> <!-- Green check icon (red theme) -->
      </div>
      <h2 class="text-xl font-semibold mb-2 text-white">Registration Successful!</h2>
      <p class="text-gray-300 mb-4">Your account has been created successfully.</p>
      <button id="redirectlogin" onclick="redirectToLogin()" class="w-full py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition mb-2">Go to Login</button>
      <button id="closepopup" onclick="closePopup()" class="w-full py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition">Close</button>
  </div>
</div>
    <!-- Footer section -->
    <footer>
      <div class="footer-container">
        <!-- About Us Section -->
        <div class="footer-section about-us">
          <h3>About Us</h3>
          <p>
            We specialize in providing customized delivery services that fit
            your schedule. With our AI-powered platform, you can pick the time
            that works best for you.
          </p>
        </div>
        <!-- Quick Links Section -->
        <div class="footer-section quick-links">
          <h3>Quick Links</h3>
          <ul>
            <li><a href="#services">Our Services</a></li>
            <li><a href="#about-us">About Us</a></li>
            <li><a href="#contact-us">Contact Us</a></li>
            <li><a href="#">Privacy Policy</a></li>
            <li><a href="#">Terms & Conditions</a></li>
          </ul>
        </div>
        <!-- Social Links Section -->
        <div class="footer-section social-links">
          <h3>Follow Us</h3>
          <div class="social-icons">
            <a href="#"><i class="fab fa-facebook-f"></i></a>
            <a href="#"><i class="fab fa-twitter"></i></a>
            <a href="#"><i class="fab fa-instagram"></i></a>
            <a href="#"><i class="fab fa-linkedin-in"></i></a>
          </div>
        </div>
        <!-- Newsletter Section -->
        <div class="footer-section newsletter">
          <h3>Subscribe to Our Newsletter</h3>
          <p>Stay updated with the latest delivery services and offers.</p>
          <form>
            <input type="email" placeholder="Enter your email" required />
            <button type="submit">Subscribe</button>
          </form>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2024 Your Delivery Service. All Rights Reserved.</p>
      </div>
    </footer>
    <script>// Function to close the popup
      function closePopup() {
          const popup = document.getElementById("popup");
          popup.style.display = "none"; // Hide popup
      }
    
      // Function to redirect to the login page
      function redirectToLogin() {
          window.location.href = "login.html";  // Change this to your actual login page URL
      }</script>
    <script src="js/styling/login.js"></script>
    <script src="js/functions/login.js"></script>
    <script src="js/functions/signup.js"></script>
  </body>
</html>